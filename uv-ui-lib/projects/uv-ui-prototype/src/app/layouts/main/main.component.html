<div class="uv-ui-shell">
    <div class="uv-ui-shell-header">
        <uvx-header
            [headerText]="title"
            [icon]="headerIcon"
            [uvHighlight]="currentHighlight === 'header'">

            <uvx-search-panel mode="global" *ngIf="checkifSearch">
                <input type="text"
                placeholder="Search"
                class="uv-input margin-left-xs">
            </uvx-search-panel>

            <div *ngIf="currentUser.new === true">
                <uvx-icon-button 
                    color='help' 
                    icon="lightbulb"
                    class="z-index-popup"
                    (click)="toggleUvLight()">
                </uvx-icon-button>
            </div>

            <uvx-icon-button 
                color='primary' 
                icon="user" 
                class="margin-left-sm margin-right-sm">
            </uvx-icon-button>    

        </uvx-header>
    </div>

    <div class="uv-ui-shell-navbar">
        <uvx-navbar>
            <span *ngFor="let navlink of navlinks" 
                class="nav-icon"
                [matTooltip]="navlink.tooltip"
                [class.nav-icon-disabled]="navlink.disabled"
                [class.nav-icon-active]="navActiveIcon === navlink.app">
                <a [routerLink]="navlink.navlink"
                    [queryParams]="{app: navlink.app}"
                    (click)="closeSearchSidebar()">
                    <img app-icon="app-icon" [src]="navlink.icon">
                </a>
            </span>
            <span class="nav-icon"
            matTooltip="Global Search"
            [class.nav-icon-active]="navActiveIcon === 'search'">
                <a (click)="toggleSearchSidebar()">
                    <img
                    app-icon="app-icon" 
                    src="http://dpzaq1wj21co3.cloudfront.net/icons/gradient/apps-search-gradient.svg">
                </a>
            </span>
        </uvx-navbar>
    </div>

    <div class="uv-ui-shell-content">
        <router-outlet></router-outlet>
    </div>
    
    <uvx-backdrop 
    [backdropState]="uvLight ? 'visible' : searchSidebarState"
        [mode]="backdropMode"
        [backdropState]="searchSidebarState" 
        (backdropClicked)="!compareWarning && closeSearchSidebar()">
    </uvx-backdrop>
    <app-search-sidebar (searchCloseEvent)="toggleSearchSidebar()" [searchSidebarState]="searchSidebarState"></app-search-sidebar>
    <app-compare-warning *ngIf="compareWarning" 
        (closeCompareWarning)="compareWarning = false" [selectedItem]="selectedItem">
    </app-compare-warning>

    <app-uv-light *ngIf="uvLight" (uvLightToggle)="toggleUvLight()"></app-uv-light>

</div>
