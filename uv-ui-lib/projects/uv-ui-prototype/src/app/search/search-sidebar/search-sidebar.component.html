<div class="search-sidebar" [@slideInOut]="searchSidebarState">
    <div class="search-sidebar-top">
        <div class="flex align-items-center justify-content-space-between  margin-bottom-sm">
            <div class="flex align-items-center">
                <uvx-icon icon="search" color="gray" class="margin-right-xxs"></uvx-icon>
                <h3>Global Search</h3>
            </div>
            <uvx-icon-button 
            icon="close" 
            color="gray" 
            size="md"
            (click)="onCloseSearchSidebar('hidden', searchText)"></uvx-icon-button>
        </div>
        <div class="margin-bottom-sm">
            <uvx-search-panel mode="component-border" (searchCloseClicked)="searchText = ''; resetScroll()">
                <input type="text"
                    placeholder="Search..."
                    class="uv-input margin-left-xs"
                    maxlength="40"
                    (ngModelChange)="resetScroll()"
                    [(ngModel)]="searchText">
            </uvx-search-panel>
        </div>
        
        <uvx-dropdown>
            <span title class="flex align-items center justify-content-space-between w-100">
                <div>
                    <uvx-icon icon="list-right" class="margin-right-xs"></uvx-icon>
                    {{searchCategory}} 
                </div>
                <div class="divider-right margin-right-xs">
                    <span class="results-number margin-right-xxs">{{getCategoryResultsNumber(searchCategory)}}</span> 
                </div>
            </span>
            
            <span options *ngFor="let item of categories"
            class="custom-option flex justify-content-space-between" 
            (click)="selectCategory(item.name)"
            [class.no-display]="getCategoryResultsNumber(item.name) < 1">
                <div class="flex align-items-center">
                    <uvx-icon icon={{item.icon}} class="margin-right-xs"></uvx-icon>
                    {{item.name}}
                </div>
                <span class="results-number">{{getCategoryResultsNumber(item.name)}}</span>
            </span>
        </uvx-dropdown>
    </div>

    <div class="divider"></div>

    <div class="search-sidebar-bottom">
        <p class="search-sidebar-bottom-header">
            <span>
                {{searchText === '' ? 'Recent Searches' : 
                getCategoryResultsNumber(searchCategory) + ' Results for ' + searchText }}
            </span>
            <span *ngIf="getCategoryResultsNumber(searchCategory) === 0 && searchText != ''">No results</span>
        </p>
        <div class="search-sidebar-bottom-wrapper">
            <div #resultsContainer class="search-sidebar-bottom-wrapper-scroll">
                <app-search-results 
                [category]="searchCategory" 
                [searchText]="searchText"
                (recentSearchClick)="searchRecentSearch($event)">
                </app-search-results>
            </div>
        </div>
    </div>
</div>
